(function(e){e.fn.__bind=function(b,a){var c=e.panzer.getEH.call(this,b);if(null==c||null==a||typeof a!="function")return this;for(var d=0;d<c.count;d++)if(a.toString()==c.event[d].toString())return this;c.event.push(a);return this};e.fn.__unbind=function(b,a){var c=e.panzer.getEH.call(this,b);if(null==c||null==a||typeof a!="function")return this;for(var d=0;d<c.count;d++)if(a.toString()==c.event[d].toString()){c.event.splice(d,1);break}return this};e.fn.__trigger=function(b){var a=e.panzer.getEH.call(this,
b);if(null==a)return null;Array.prototype.splice.call(arguments,0,1);for(var c,d=0;d<a.count;d++)c=a.event[d].apply(this,arguments);return c};e.panzer={check:function(b,a,c){var d;if(null!=a)if(null!=c&&c&&null!=a.readonly&&a.readonly)d=e.panzer.getTip.call(this,a,"readonly",(null==a.name?"argument":a.name)+" is read-only");else if(null==b){if(null!=a.need&&a.need)null==a.defaultvalue?d=e.panzer.getTip.call(this,a,"need",(null==a.name?"argument":a.name)+" can not be empty"):b=a.defaultvalue}else if(null!=
a.type&&a.type!="date"&&typeof b!=a.type)null==a.defaultvalue?d=e.panzer.getTip.call(this,a,"type",(null==a.name?"argument":a.name)+" should be a "+a.type):b=a.defaultvalue;else if(null!=a.min&&(typeof b=="number"&&b<a.min||typeof b=="string"&&b.length<a.min))null==a.defaultvalue?d=e.panzer.getTip.call(this,a,"min",(null==a.name?"argument":a.name)+" (length) should be bigger than or equal "+a.min.toString()):b=a.defaultvalue;else if(null!=a.max&&(typeof b=="number"&&b>a.max||typeof b=="string"&&b.length>
a.max))null==a.defaultvalue?d=e.panzer.getTip.call(this,a,"max",(null==a.name?"argument":a.name)+" (length) should be smaller than or equal "+a.max.toString()):b=a.defaultvalue;else if(null!=a.reg&&!a.reg.test(b.toString()))null==a.defaultvalue?d=e.panzer.getTip.call(this,a,"reg",(null==a.name?"argument":a.name)+" should match reg"):b=a.defaultvalue;return{success:null==d,value:b,tip:null==d?e.panzer.getTip.call(this,a,"success",null):d}},checkOption:function(b){if(!(null==b||null==b.__mask))for(var a in b){var c=
b.__mask[a],d=e.panzer.check.call(this,b[a],c,!1);d.success||e.error(d.tip);b[a]=d.value;null!=c&&null!=c.event&&c.event&&this.__bind(null==c.name?a:c.name,b[a])}},clone:function(b,a){if(null==a)return e.extend({},b.option);else e(a)[b.plusinname](e.extend({},b.option))},convert:function(b,a,c,d){if(null==b||typeof b=="string"&&b==""){if(null==a)switch(c){case "boolean":a=!0;break;case "number":a=0;break;case "date":a=new Date;break;default:a=""}b=a}switch(c){case "boolean":return b.toString().toLowerCase()==
"true"||b.toString()=="1"||b.toString()=="-1"?!0:b.toString().toLowerCase()=="false"||b.toString()=="0"?!1:null==d?b:d(b);case "number":return isNaN(b)?null==d?b:d(b):Number(b);case "date":return e.panzer.convertToDate.call(this,b,d);case "string":return b.toString();default:return b}},convertToDate:function(b,a){if(typeof b!="string"||b.indexOf("/")!=0||b.lastIndexOf("/")!=b.length-1)return null==a?b:a(b);var c=b.substring(1,b.length-1);try{return eval("new "+c)}catch(d){return b}},created:function(b){null==
b&&e.error("can not to check null created");b=e(b);return b.length==0?!1:null!=b.eq(0).data("option")},createID:function(){return Math.ceil(Math.random()*1E15).toString()},createJQuery:function(b,a){if(e.isPlainObject(b)&&null!=b.expression&&null==a)return e.panzer.createJQuery(b.expression,b.analyze);if(null!=a&&a)try{return e(e.panzer.createObject.call(this,b))}catch(c){}return e(b)},createObject:function(b,a){if(null!=b){arguments.token=a;try{return eval("var __o = "+b),eval("__o")}catch(c){e.error("can create object from "+
b)}}},destroy:function(){return this.removeData("option")},encodeData:function(){for(var b="",a=0;a<arguments.length;a++){var c=arguments[a];if(null!=c)for(var d in c)b!=""&&(b+=","),b+='"'+d.toString()+'": '+e.panzer.encodeValue.call(this,c[d],null)}return"{"+b+"}"},encodeValue:function(b,a,c,d){b=e.panzer.convert.call(this,b,a,c,d);return typeof b=="string"?'"'+b+'"':isNaN(Date.parse(b))?b.toString():'"'+e.panzer.formatDate.call(this,b,"yyyy-MM-dd hh:mm:ss",null)+'"'},formatDate:function(b,a,c){b=
e.panzer.convertToDate.call(this,b,c);try{return a.replace(/y+/g,function(a){var c=b.getFullYear().toString();return a=="y"?c.substring(3):a=="yy"?c.substring(2):c}).replace(/M+/g,function(a){var c=b.getMonth()+1;return a=="M"?c.toString():c<10?"0"+c.toString():c.toString()}).replace(/d+/g,function(a){var c=b.getDate();return a=="d"?c.toString():c<10?"0"+c.toString():c.toString()}).replace(/H+/g,function(a){var c=b.getHours();return a=="H"?c.toString():c<10?"0"+c.toString():c.toString()}).replace(/h+/g,
function(a){var c=b.getHours();c>=13&&(c-=12);return a=="h"?c.toString():c<10?"0"+c.toString():c.toString()}).replace(/m+/g,function(a){var c=b.getMinutes();return a=="m"?c.toString():c<10?"0"+c.toString():c.toString()}).replace(/s+/g,function(a){var c=b.getSeconds();return a=="s"?c.toString():c<10?"0"+c.toString():c.toString()})}catch(d){return b}},eventEmpty:function(b){b=e.panzer.getEH.call(this,b);return null==b||b.count==0},getEH:function(b){if(this.length==0||null==b)return null;var a=this.eq(0);
null==a.data("event")&&a.data("event",{});a=a.data("event");null==a[b]&&(a[b]=[]);return{event:a[b],count:a[b].length}},getPE:function(b,a){if(this.length==0||null==b)return null;null==a[0]&&(a[0]={});var c=this.eq(0),d={plusinname:b,jquery:c,option:c.data("option"),result:this};typeof a[0]=="string"?(null==d.option&&e.error("plusin has not been initialized"),a[0]!="option"?(c=e.fn[b].funs[a[0].toLowerCase()],null==c&&e.error("method "+a[0].toLowerCase()+" does not exist"),Array.prototype.splice.call(a,
0,1,d),null==c.type?c.method.apply(this,a):d.result=c.method.apply(this,a)):(null==a[1]&&e.error("option name can not be empty"),a.length==2?d.result=d.option[a[1].toLowerCase()]:(c=e.panzer.check.call(this,a[2],e.fn[b].defaults.__mask[a[1].toLowerCase()],!0),c.success||e.error(c.tip),d.option[a[1].toLowerCase()]=c.value))):typeof a[0]==="object"?(null!=d.option&&e.error("plusin has been initialized"),d.option=e.extend({},e.fn[b].defaults,a[0]),e.panzer.checkOption.call(this,d.option),c.data("option",
d.option),null!=e.fn[b].funs.create&&(Array.prototype.splice.call(a,0,1,d),e.fn[b].funs.create.method.apply(this,a))):e.error("the first parameter error");return d},getTip:function(b,a,c){return null==b||null==b.tip?c:typeof b.tip=="string"?b.tip:typeof b.tip!="object"?c:null==b.tip[a]?c:b.tip[a]}};e.panzer.reg={email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,
url:/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i,
dateISO:/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/,dateDE:/^\d\d?\.\d\d?\.\d\d\d?\d?$/}})(jQuery);
